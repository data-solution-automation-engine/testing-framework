-- IF OBJECT_ID('[ut].[TEST_RESULTS]','U') IS NOT NULL
-- DROP TABLE [ut].[TEST_RESULTS]
GO

CREATE TABLE [ut].[TEST_RESULTS] (
    [PLAN_ID]        INT            NULL,
    [TEST_ID]        INT            NOT NULL,
    [TEST_TIMESTAMP] DATETIME2 (7)  NOT NULL,
    [OUTPUT]         NVARCHAR (MAX) NULL,
    [RESULT]         VARCHAR (100)  NULL,
    [TEST_CODE]      NVARCHAR (MAX) NULL,
    CONSTRAINT [PK_TEST_RESULTS] PRIMARY KEY CLUSTERED ([TEST_ID] ASC, [TEST_TIMESTAMP] ASC),
    CONSTRAINT [FK_RESULTS_TEST_ID] FOREIGN KEY ([TEST_ID]) REFERENCES [ut].[TEST] ([ID]),
    CONSTRAINT [FK_RESULTS_PLAN_ID] FOREIGN KEY ([PLAN_ID]) REFERENCES [ut].[TEST_PLAN] ([ID])
);
